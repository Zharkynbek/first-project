(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(e,n,t){},QfWi:function(e,n,t){"use strict";t.r(n);t("lYjL"),t("8cZI"),t("lmye"),t("D/wG"),t("JBxO"),t("JjHl"),t("FdtR"),t("L1EO");var o,r=t("QJ3N"),l=(t("bzha"),t("zrP5"),t("jffb")),a=t.n(l),c=t("qGUI"),u=t.n(c),i=t("vWpW"),m=t.n(i),s={form:document.querySelector(".comment-form"),nameInput:document.querySelector(".name"),commentInput:document.querySelector(".comment"),commentsList:document.querySelector(".comments"),loginBtn:document.querySelector(".log-btn "),formBtn:document.querySelector(".submit-form")};function d(e){(e.preventDefault(),""!==document.querySelector(".name").value)?""!==document.querySelector(".comment").value?function(e){fetch("https://firstproject-b95dd-default-rtdb.europe-west1.firebasedatabase.app/comments.json",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(n){return e.id=n.name,e})).then(p).then(b)}({date:new Date(Date.now()).toLocaleDateString()+" "+new Date(Date.now()).toLocaleTimeString(),name:document.querySelector(".name").value,comment:document.querySelector(".comment").value}):Object(r.error)({text:"input for comment is empty",delay:1e3}):Object(r.error)({text:"input for name is empty",delay:1e3})}function p(e){var n=f();n.push(e),localStorage.setItem("comments",JSON.stringify(n))}function f(){return JSON.parse(localStorage.getItem("comments")||"[]")}function b(){var e=f();document.querySelector(".name").value="",document.querySelector(".comment").value="";var n=e.map((function(e){return'<li id="'+e.id+'">  \n      <h3>'+e.name+"</h3>\n      <p>"+e.date+"</p>\n      <p>"+e.comment+'</p>\n      <button class="delete">delete</button>\n    </li>'})).join("");document.querySelector(".comments").innerHTML=n}function y(e){if("BUTTON"===e.target.nodeName){var n=f().filter((function(n){return n.id!==e.target.parentNode.id}));localStorage.setItem("comments",JSON.stringify(n)),b()}else console.log("heko")}function h(){(o=document.createElement("div")).classList.add("login"),mui.overlay("on",o);o.innerHTML='<h1 class="title">Sign In</h1>\n  <form class="modal-form" action="submit">\n  <label class="label">\n  <p>Login</p>\n  <input type="text" value="user@mail.com">\n  </label>\n  <label class="label">\n  <p>Password</p>\n  <input type="password" value="12345678">\n  </label>\n  <button class="button">Join</button>\n  </form>\n  ',document.querySelector(".modal-form").addEventListener("submit",v)}function v(e){e.preventDefault(),function(e,n){return fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCniRY8mOu8mbV8PRMWbZHKAGJrPGGPrL8\n",{method:"POST",body:JSON.stringify({email:e,password:n,returnSecureToken:!0}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.idToken}))}(e.target[0].value,e.target[1].value).then(g)}function g(e){return e?fetch("https://firstproject-b95dd-default-rtdb.europe-west1.firebasedatabase.app/comments.json?auth="+e).then((function(e){return e.json()})).then((function(e){var n=Object.values(e);mui.overlay("off",o),document.body.innerHTML=u()(n),document.querySelector(".logout").addEventListener("click",S)})):Promise.reject(alert("Вы не авторизированы"))}function S(){document.body.innerHTML=m()(),document.querySelector(".comment-form").addEventListener("submit",d),document.querySelector(".log-btn").addEventListener("click",h),b(),document.querySelector(".delete").addEventListener("click",(function(e){console.log("hello"),y(e)}))}s.form.addEventListener("submit",a()(d,500,{leading:!0,trailing:!1}),!1),window.addEventListener("load",b),s.commentsList.addEventListener("click",y),s.loginBtn.addEventListener("click",h)},qGUI:function(e,n,t){var o=t("mp5j");e.exports=(o.default||o).template({1:function(e,n,t,o,r){var l,a=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,u=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <li>\r\n            <h3>"+u("function"==typeof(l=null!=(l=i(t,"name")||(null!=n?i(n,"name"):n))?l:c)?l.call(a,{name:"name",hash:{},data:r,loc:{start:{line:7,column:16},end:{line:7,column:24}}}):l)+"</h3>\r\n            <p>"+u("function"==typeof(l=null!=(l=i(t,"date")||(null!=n?i(n,"date"):n))?l:c)?l.call(a,{name:"date",hash:{},data:r,loc:{start:{line:8,column:15},end:{line:8,column:23}}}):l)+"</p>\r\n            <p>"+u("function"==typeof(l=null!=(l=i(t,"comment")||(null!=n?i(n,"comment"):n))?l:c)?l.call(a,{name:"comment",hash:{},data:r,loc:{start:{line:9,column:15},end:{line:9,column:26}}}):l)+"</p>\r\n        </li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,o,r){var l;return'<div>\r\n    <h1>Comments</h1>\r\n    <button class="logout">LogOut</button>\r\n    <ol>\r\n'+(null!=(l=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:5,column:8},end:{line:11,column:17}}}))?l:"")+"    </ol>\r\n</div>"},useData:!0})},vWpW:function(e,n,t){var o=t("mp5j");e.exports=(o.default||o).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,o,r){return'<button class="mui-btn mui-btn--flat mui-btn--primary log-btn">Login</button>\r\n<div class="main">\r\n    <h1>Firebase</h1>\r\n    <form class="comment-form" action="submit">\r\n        <label>\r\n            <p>Name:</p>\r\n            <input type="text" class="name">\r\n        </label>\r\n        <label>\r\n            <p>Comment:</p>\r\n            <input class="comment" type="text">\r\n        </label>\r\n        <button class="submit-form">SEND</button>\r\n    </form>\r\n</div>\r\n<ul class="comments"></ul>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.11dc825e9a44b6e93efe.js.map