{"version":3,"sources":["webpack:///./index.js"],"names":["refs","form","document","querySelector","nameInput","commentInput","commentsList","loginBtn","addToLocal","comment","commentsArr","getCommentsFromLocal","push","localStorage","setItem","JSON","stringify","parse","getItem","renderComments","commentArr","value","markup","map","el","id","name","date","join","innerHTML","addEventListener","e","preventDefault","fetch","method","body","headers","then","resp","json","data","sendComments","Date","now","toLocaleDateString","toLocaleTimeString","window","target","localName","filteredComments","filter","parentNode"],"mappings":"mMAIMA,EAAO,CACXC,KAAMC,SAASC,cAAc,iBAC7BC,UAAWF,SAASC,cAAc,SAClCE,aAAcH,SAASC,cAAc,YACrCG,aAAcJ,SAASC,cAAc,aACrCI,SAAUL,SAASC,cAAc,cAqCnC,SAASK,EAAWC,GAClB,IAAMC,EAAcC,IACpBD,EAAYE,KAAKH,GACjBI,aAAaC,QAAQ,WAAYC,KAAKC,UAAUN,IAGlD,SAASC,IACP,OAAOI,KAAKE,MAAMJ,aAAaK,QAAQ,aAAe,MAGxD,SAASC,IACP,IAAMC,EAAaT,IACnBX,EAAKI,UAAUiB,MAAQ,GACvBrB,EAAKK,aAAagB,MAAQ,GAC1B,IAAMC,EAASF,EACZG,KAAI,SAAAC,GACH,iBAAkBA,EAAGC,GAArB,mBACMD,EAAGE,KADT,mBAEKF,EAAGG,KAFR,kBAGKH,EAAGf,QAHR,oDAODmB,KAAK,IACR5B,EAAKM,aAAauB,UAAYP,EA1BhCtB,EAAKC,KAAK6B,iBAAiB,UAZ3B,SAAqBC,GACnBA,EAAEC,iBArBJ,SAAsBvB,GACbwB,MACL,0FACA,CACEC,OAAQ,OACRC,KAAMpB,KAAKC,UAAUP,GACrB2B,QAAS,CACP,eAAgB,sBAInBC,MAAK,SAAAC,GAAI,OAAIA,EAAKC,UAClBF,MAAK,SAAAG,GAEJ,OADA/B,EAAQgB,GAAKe,EAAKd,KACXjB,KAER4B,KAAK7B,GACL6B,KAAKlB,GAYRsB,CAPgB,CACdd,KAAS,IAAIe,KAAKA,KAAKC,OAAOC,qBAA1B,IAAkD,IAAIF,KACxDA,KAAKC,OACLE,qBACFnB,KAAM1B,EAAKI,UAAUiB,MACrBZ,QAAST,EAAKK,aAAagB,WAkC/ByB,OAAOhB,iBAAiB,OAAQX,GAEhCnB,EAAKM,aAAawB,iBAAiB,SAEnC,SAAuBC,GACrB,GAA2B,WAAvBA,EAAEgB,OAAOC,UACX,OAEF,IAAMC,EAAmBtC,IAAuBuC,QAAO,SAAA1B,GACrD,OAAOA,EAAGC,KAAOM,EAAEgB,OAAOI,WAAW1B,MAEvCZ,aAAaC,QAAQ,WAAYC,KAAKC,UAAUiC,IAChD9B,S","file":"main.8bf7bb3851ade229f6f9.js","sourcesContent":["//AIzaSyCniRY8mOu8mbV8PRMWbZHKAGJrPGGPrL8\r\n\r\nimport './styles.css';\r\n\r\nconst refs = {\r\n  form: document.querySelector('.comment-form'),\r\n  nameInput: document.querySelector('.name'),\r\n  commentInput: document.querySelector('.comment'),\r\n  commentsList: document.querySelector('.comments'),\r\n  loginBtn: document.querySelector('.log-btn '),\r\n};\r\n\r\nfunction sendComments(comment) {\r\n  return fetch(\r\n    'https://firstproject-b95dd-default-rtdb.europe-west1.firebasedatabase.app/comments.json',\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(comment),\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n    },\r\n  )\r\n    .then(resp => resp.json())\r\n    .then(data => {\r\n      comment.id = data.name;\r\n      return comment;\r\n    })\r\n    .then(addToLocal)\r\n    .then(renderComments);\r\n}\r\n\r\nfunction sendRequest(e) {\r\n  e.preventDefault();\r\n  const comment = {\r\n    date: `${new Date(Date.now()).toLocaleDateString()} ${new Date(\r\n      Date.now(),\r\n    ).toLocaleTimeString()}`,\r\n    name: refs.nameInput.value,\r\n    comment: refs.commentInput.value,\r\n  };\r\n  sendComments(comment);\r\n}\r\n\r\nrefs.form.addEventListener('submit', sendRequest);\r\n\r\nfunction addToLocal(comment) {\r\n  const commentsArr = getCommentsFromLocal();\r\n  commentsArr.push(comment);\r\n  localStorage.setItem('comments', JSON.stringify(commentsArr));\r\n}\r\n\r\nfunction getCommentsFromLocal() {\r\n  return JSON.parse(localStorage.getItem('comments') || '[]');\r\n}\r\n\r\nfunction renderComments() {\r\n  const commentArr = getCommentsFromLocal();\r\n  refs.nameInput.value = '';\r\n  refs.commentInput.value = '';\r\n  const markup = commentArr\r\n    .map(el => {\r\n      return `<li id=\"${el.id}\">  \r\n      <h3>${el.name}</h3>\r\n      <p>${el.date}</p>\r\n      <p>${el.comment}</p>\r\n      <button>delete</button>\r\n    </li>`;\r\n    })\r\n    .join('');\r\n  refs.commentsList.innerHTML = markup;\r\n}\r\n\r\nwindow.addEventListener('load', renderComments);\r\n\r\nrefs.commentsList.addEventListener('click', deleteComment);\r\n\r\nfunction deleteComment(e) {\r\n  if (e.target.localName !== 'button') {\r\n    return;\r\n  }\r\n  const filteredComments = getCommentsFromLocal().filter(el => {\r\n    return el.id !== e.target.parentNode.id;\r\n  });\r\n  localStorage.setItem('comments', JSON.stringify(filteredComments));\r\n  renderComments();\r\n}\r\n"],"sourceRoot":""}